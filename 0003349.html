<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <link href="css/default.css" rel="stylesheet" type="text/css"/>
  <script src="js/replicate_buttons.js">
  </script>
  <title>
   0003349: Установка персональных out-restrictor-ов - Mantis
  </title>
  <script src="javascript/common.js" type="text/JavaScript">
  </script>
 </head>
 <body>
  <div class="center">
   <span class="pagetitle">Mantis</span>
  </div>
  <br/>
  <table cellspacing="1" class="width100">
   <tr>
    <td class="left" colspan="4">
     <a href="0003348.html">
      &lt; Прошлое обращение (0003348)
     </a></td>
    <td class="right" colspan="2">
     <a href="0003350.html">
      Следующее обращение (0003350) &gt;
     </a></td>
   </tr>
   <tr class="row-category">
    <td width="15%">ID</td>
    <td width="20%">Категория</td>
    <td width="15%">Критичность</td>
    <td width="20%">Воспроизводимость</td>
    <td width="15%">Дата добавления</td>
    <td width="15%">Обновлено</td>
   </tr>
   <tr class="row-1">
    <td>0003349</td>
    <td>[S.T.A.L.K.E.R.: Тень Чернобыля]</td>
    <td>незначительный</td>
    <td>всегда</td>
    <td>11 мая 2005 12:31</td>
    <td>16 мая 2005 15:26</td>
   </tr>
   <tr class="spacer" height="5">
    <td colspan="6"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Автор</td>
    <td>Zmey</td>
    <td class="category">Режим доступа</td>
    <td>общедоступный</td>
    <td colspan="2"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Приоритет</td>
    <td>нормальный</td>
    <td class="category">Решение</td>
    <td>исправлен</td>
    <td class="category">Платформа</td>
    <td></td>
   </tr>
   <tr class="row-1">
    <td class="category">Статус</td>
    <td bgcolor="#e8e8e8">
     закрыт</td>
    <td colspan="2"></td>
    <td class="category">OS</td>
    <td></td>
   </tr>
   <tr class="row-2">
    <td class="category">Прогноз</td>
    <td>нет</td>
    <td colspan="2"></td>
    <td class="category">Версия OS</td>
    <td></td>
   </tr>
   <tr class="row-1">
    <td class="category">ETA</td>
    <td>19 января 2038 05:14</td>
    <td class="category"></td>
    <td></td>
    <td class="category">Подверсия продукта</td>
    <td></td>
   </tr>
   <tr class="spacer" height="5">
    <td colspan="6"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Сводка</td>
    <td colspan="5">0003349: Установка персональных out-restrictor-ов</td>
   </tr>
   <tr class="row-1">
    <td class="category">Описание</td>
    <td colspan="5">Подводя итоги разговора:
     <br/>
     - Персонаж, которому установили персональный out рестриктор, должен прекратить выполнять задания и начать произвольно перемещаться в пределах этого рестриктора.
     <br/>
     - Персонаж, находящийся за пределами персонального out рестриктора, должен, в зависимости от расстояния (настройки сделать в ltx, чтобы и скрипты могли их использовать при выборе состояний):
     <br/>
     1) Идти в его сторону
     <br/>
     2) Бежать в его сторону
     <br/>
     3) Спринт в его сторону
     <br/>
     <br/></td>
   </tr>
   <tr class="row-2">
    <td class="category">Шаги по воспроизведению</td>
    <td colspan="5"></td>
   </tr>
   <tr class="row-1">
    <td class="category">Дополнительная информация</td>
    <td colspan="5"></td>
   </tr>
   <tr class="spacer" height="5">
    <td colspan="6"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Присоединенные файлы</td>
    <td colspan="5"></td>
   </tr>
   <tr align="center">
    <td align="center" colspan="6">
     <table>
     </table></td>
   </tr>
  </table>
  <br/>
  <div id="relationships_open">
   <table cellspacing="1" class="width100">
    <tr class="row-2" valign="top">
     <td class="form-title" colspan="2" width="15%">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      Связи</td>
    </tr>
    
    <tr>
     <td colspan="2"></td>
    </tr>
   </table>
  </div>
  <div id="relationships_closed" style="display: none;">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title">
      <a href="#">
       <img alt="+" border="0" src="images/plus.png"/>
      </a>
      Связи</td>
    </tr>
   </table>
  </div>
  <br/>
  <br/>
  <div id="monitoring_closed" style="display: none;">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title" colspan="2">
      <a href="#">
       <img alt="+" border="0" src="images/plus.png"/>
      </a>
      Пользователи, отслеживающие обращение</td>
    </tr>
   </table>
  </div>
  <div id="monitoring_open">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="center">
      Нет полльзователей, отслеживающих обращение.</td>
    </tr>
   </table>
  </div>
  <br/>
  <br/>
  <div id="bugnotes_closed" style="display: none;">
   <table cellspacing="1" class="width100">
    <td class="form-title" colspan="2">
     <a href="#">
      <img alt="+" border="0" src="images/plus.png"/>
     </a>
     Комментарии</td>
   </table>
  </div>
  <div id="bugnotes_open">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title" colspan="2">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      Комментарии</td>
    </tr>
    <tr class="bugnote" id="3422" name="3422">
     <td class="bugnote-public">
      <span class="small">(0003422)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">11 мая 2005 12:32</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">Какой тип анимации выбрать - free или danger?
      <br/>
      <br/>
      Я думаю что при обычном перемещении можно использовать free, т.к. в danger он перейдет если увидит врага.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="3423" name="3423">
     <td class="bugnote-public">
      <span class="small">(0003423)</span>
      <br/>
      Stohe
      <br/>
      <span class="small">11 мая 2005 12:37</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">Я думаю еще следует решить вопрос, когда персонаж по каким либо причинам не может дойти до места, куда у него выдано задание. Например по гейм графу не найден путь либо единственный проход загораживает in-restrictor</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="3424" name="3424">
     <td class="bugnote-public">
      <span class="small">(0003424)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">11 мая 2005 12:41</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">Текущие настройки скриптового move manager-а (при возвращении на стартовую точку пути, если персонажа отвлекли):
      <br/>
      <br/>
      -- Если расстояние меньше &lt;= 10 м, идем пешком
      <br/>
      local dist_walk = 10 -- &lt; dist_run
      <br/>
      <br/>
      -- Если расстояние &lt;= 2500 м, то бежим
      <br/>
      local dist_run = 2500 -- было 25, но sprint по просьбе Профа отключили
      <br/>
      <br/>
      -- Иначе бежим в спринте.
      <br/>
      <br/>
      -- Идти не менее трех секунд, прежде чем перейти на бег (т.н. разгон)
      <br/>
      local walk_min_time = 3000
      <br/>
      <br/>
      -- Бежать не менее двух секунд, прежде чем перейти на спринт
      <br/>
      local run_min_time = 2000
      <br/>
      <br/>
      -- Переключившись в состояние (бег, ходьба, спринт),
      <br/>
      -- не переключаться в другое состояние 1500 ms
      <br/>
      local keep_state_min_time = 1500</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="3425" name="3425">
     <td class="bugnote-public">
      <span class="small">(0003425)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">11 мая 2005 12:44</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">Разгон нужен для того, чтобы не было казусных ситуаций когда, например, сталкер убивает своего последнего врага и в то же мгновение поспринтовал куда-то.
      <br/>
      <br/>
      Инерция переключения (keep_state_min_time) нужна для того, чтобы сталкер только только разогнавшись не переходил через долю секунлы на шаг из-за того, что уже подбежал близко к цели - пусть лучше подбежит почти к самой цели и остановится.
      <br/>
      <br/>
      Спринт не очень хорошо смотрелся при переключении должностей гулага (например охранник с вышки решает пойти на ворота, т.к. они далеко, он начинал в спринте бежать, разнося физику), поэтому его зарубили. Но при возвращении в рестриктор можно спринт вернуть, там я думаю с ним проблем не будет.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="3426" name="3426">
     <td class="bugnote-public">
      <span class="small">(0003426)</span>
      <br/>
      Dima
      <br/>
      <span class="small">11 мая 2005 12:55</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">значит так.
      <br/>
      <br/>
      идти/бежать к доступной позиции вы можете сделать сами, вставив action с соответсвующим precondition перед alife_planner-ом для _всех_ персонажей
      <br/>
      <br/>
      а с графом - да, буду решать, но надо подумать, как бы попроще и поэффективнее</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="3427" name="3427">
     <td class="bugnote-public">
      <span class="small">(0003427)</span>
      <br/>
      Stohe
      <br/>
      <span class="small">11 мая 2005 12:57</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">Дима, а есть ли механизм проверки - стоит ли у персонажа локальный АУТ рестриктор? Мы можем просить только npc:out_restrictions(), и оно вернет все рестрикторы, и дефолтные и недефолтные.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="3432" name="3432">
     <td class="bugnote-public">
      <span class="small">(0003432)</span>
      <br/>
      Dima
      <br/>
      <span class="small">11 мая 2005 16:29</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">сделано :
      <br/>
      <br/>
      base_in_restrictions()
      <br/>
      base_out_restrictions()</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
   </table>
  </div>
  <br/>
  <div id="history_closed" style="display: none;">
   <table cellspacing="0" class="width100">
    <tr>
     <td class="form-title" colspan="4">
      <a href="#">
       <img alt="+" border="0" src="images/plus.png"/>
      </a>
      История</td>
    </tr>
   </table>
  </div>
  <div id="history_open">
   <table cellspacing="0" class="width100">
    <tr>
     <td class="form-title" colspan="4">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      История</td>
    </tr>
    <tr class="row-category-history">
     <td class="small-caption">Дата изменения</td>
     <td class="small-caption">Имя пользователя</td>
     <td class="small-caption">Поле</td>
     <td class="small-caption">Изменение</td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">11 мая 2005 12:31</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Новое обращение</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">11 мая 2005 12:32</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 3422</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">11 мая 2005 12:37</td>
     <td class="small-caption">Stohe</td>
     <td class="small-caption">Комментарий добавлен: 3423</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">11 мая 2005 12:41</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 3424</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">11 мая 2005 12:44</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 3425</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">11 мая 2005 12:55</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Комментарий добавлен: 3426</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">11 мая 2005 12:57</td>
     <td class="small-caption">Stohe</td>
     <td class="small-caption">Комментарий добавлен: 3427</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">11 мая 2005 16:29</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Комментарий добавлен: 3432</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">11 мая 2005 16:29</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Статус</td>
     <td class="small-caption">назначен =&gt; признан</td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">11 мая 2005 16:29</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Описание обновлено</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">16 мая 2005 15:26</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Статус</td>
     <td class="small-caption">признан =&gt; решен</td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">16 мая 2005 15:26</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Решение</td>
     <td class="small-caption">открыт =&gt; исправлен</td>
    </tr>
   </table>
  </div>
  <br/>
  <tr align="center">
   <td align="center" colspan="6">
    <table>
    </table></td>
  </tr>
 </body>
