<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <link href="css/default.css" rel="stylesheet" type="text/css"/>
  <script src="js/replicate_buttons.js">
  </script>
  <title>
   0002301: Выполнение скриптов - Mantis
  </title>
  <script src="javascript/common.js" type="text/JavaScript">
  </script>
 </head>
 <body>
  <div class="center">
   <span class="pagetitle">Mantis</span>
  </div>
  <br/>
  <table cellspacing="1" class="width100">
   <tr>
    <td class="left" colspan="4">
     <a href="0002299.html">
      &lt; Прошлое обращение (0002299)
     </a></td>
    <td class="right" colspan="2">
     <a href="0002302.html">
      Следующее обращение (0002302) &gt;
     </a></td>
   </tr>
   <tr class="row-category">
    <td width="15%">ID</td>
    <td width="20%">Категория</td>
    <td width="15%">Критичность</td>
    <td width="20%">Воспроизводимость</td>
    <td width="15%">Дата добавления</td>
    <td width="15%">Обновлено</td>
   </tr>
   <tr class="row-1">
    <td>0002301</td>
    <td>[S.T.A.L.K.E.R.: Тень Чернобыля]</td>
    <td>незначительный</td>
    <td>всегда</td>
    <td>24 февраля 2005 16:23</td>
    <td>14 марта 2005 11:43</td>
   </tr>
   <tr class="spacer" height="5">
    <td colspan="6"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Автор</td>
    <td>Partizan</td>
    <td class="category">Режим доступа</td>
    <td>общедоступный</td>
    <td colspan="2"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Приоритет</td>
    <td>нормальный</td>
    <td class="category">Решение</td>
    <td>исправлен</td>
    <td class="category">Платформа</td>
    <td></td>
   </tr>
   <tr class="row-1">
    <td class="category">Статус</td>
    <td bgcolor="#e8e8e8">
     закрыт</td>
    <td colspan="2"></td>
    <td class="category">OS</td>
    <td></td>
   </tr>
   <tr class="row-2">
    <td class="category">Прогноз</td>
    <td>нет</td>
    <td colspan="2"></td>
    <td class="category">Версия OS</td>
    <td></td>
   </tr>
   <tr class="row-1">
    <td class="category">ETA</td>
    <td>19 января 2038 05:14</td>
    <td class="category"></td>
    <td></td>
    <td class="category">Подверсия продукта</td>
    <td></td>
   </tr>
   <tr class="spacer" height="5">
    <td colspan="6"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Сводка</td>
    <td colspan="5">0002301: Выполнение скриптов</td>
   </tr>
   <tr class="row-1">
    <td class="category">Описание</td>
    <td colspan="5">В последней версии скрипты выполняються с задержкой в секунд 10. Я выхожу от торговца на улицу, он тока тогда начинает говорить, подхожу к лагерю со мной начинают говорить тоже спустя секунд 10 и тд.</td>
   </tr>
   <tr class="row-2">
    <td class="category">Шаги по воспроизведению</td>
    <td colspan="5"></td>
   </tr>
   <tr class="row-1">
    <td class="category">Дополнительная информация</td>
    <td colspan="5"></td>
   </tr>
   <tr class="spacer" height="5">
    <td colspan="6"></td>
   </tr>
   <tr class="row-2">
    <td class="category">Присоединенные файлы</td>
    <td colspan="5"></td>
   </tr>
   <tr align="center">
    <td align="center" colspan="6">
     <table>
     </table></td>
   </tr>
  </table>
  <br/>
  <div id="relationships_open">
   <table cellspacing="1" class="width100">
    <tr class="row-2" valign="top">
     <td class="form-title" colspan="2" width="15%">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      Связи</td>
    </tr>
    
    <tr>
     <td colspan="2"></td>
    </tr>
   </table>
  </div>
  <div id="relationships_closed" style="display: none;">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title">
      <a href="#">
       <img alt="+" border="0" src="images/plus.png"/>
      </a>
      Связи</td>
    </tr>
   </table>
  </div>
  <br/>
  <br/>
  <div id="monitoring_closed" style="display: none;">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title" colspan="2">
      <a href="#">
       <img alt="+" border="0" src="images/plus.png"/>
      </a>
      Пользователи, отслеживающие обращение</td>
    </tr>
   </table>
  </div>
  <div id="monitoring_open">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title" colspan="2">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      Пользователи, отслеживающие обращение</td>
    </tr>
    <tr class="row-1">
     <td class="category" width="15%">
      Список пользователей</td>
     <td>Prof, Koan, Sidorovich, Zmey, Chugai</td>
    </tr>
   </table>
  </div>
  <br/>
  <br/>
  <div id="bugnotes_closed" style="display: none;">
   <table cellspacing="1" class="width100">
    <td class="form-title" colspan="2">
     <a href="#">
      <img alt="+" border="0" src="images/plus.png"/>
     </a>
     Комментарии</td>
   </table>
  </div>
  <div id="bugnotes_open">
   <table cellspacing="1" class="width100">
    <tr>
     <td class="form-title" colspan="2">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      Комментарии</td>
    </tr>
    <tr class="bugnote" id="2464" name="2464">
     <td class="bugnote-public">
      <span class="small">(0002464)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">03 марта 2005 12:42</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">Предлагаю для всех предметов, которые не апдейтились больше секунды запускать апдейты за счет рендера/прочего, т.е. лучше пусть лагает все, чем неработающая из-за редких апдейтов логика при том, что ходить по уровню можно нормально.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2466" name="2466">
     <td class="bugnote-public">
      <span class="small">(0002466)</span>
      <br/>
      Dima
      <br/>
      <span class="small">03 марта 2005 13:15</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">А вы отключите свой сриптовый спам, чтобы в лог ничего не писалось, тогда и фпс будет выше и лагов таких не будет</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2467" name="2467">
     <td class="bugnote-public">
      <span class="small">(0002467)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">03 марта 2005 13:24</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">А если комп медленный? Я легко могу убрать лаги, вопрос в том, что игра при низких FPS плохо работает - логика не работает, но ходить по уровню можно.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2468" name="2468">
     <td class="bugnote-public">
      <span class="small">(0002468)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">03 марта 2005 13:25</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">...а лагает сейчас из-за лампочек, если ограничить их кол-во, лагов ессно нет, но проблему это не решает.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2476" name="2476">
     <td class="bugnote-public">
      <span class="small">(0002476)</span>
      <br/>
      Oles
      <br/>
      <span class="small">03 марта 2005 19:12</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">0) движок выдает максимум 10 сек. на апдейты. за 10 секунд можно посчитать всё, что только можно представить и причём по нескольку раз -
      <br/>
      1) т.е. предположительно просто что-то сломалось
      <br/>
      2) т.е. после проверки под в-тюном будет понятно что именно
      <br/>
      3) т.е. нужен ескейп работающий под релизом (без красных надписей)</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2479" name="2479">
     <td class="bugnote-public">
      <span class="small">(0002479)</span>
      <br/>
      Sidorovich
      <br/>
      <span class="small">04 марта 2005 10:33</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">А насчет скриптового спама - я вырубал и эффект = 0.</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2481" name="2481">
     <td class="bugnote-public">
      <span class="small">(0002481)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">04 марта 2005 10:42</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">0) что значит выдает на апдейты 10 секунд?
      <br/>
      в течение 10 секунд апдейтятся исключительно скрипты, пока все не проапдейтятся?
      <br/>
      Дима говорил, что скрипты по очереди апдейтятся
      <br/>
      <br/>
      2) что проверять vtun-ом? задача не поднять FPS, а сделать поведение игры нормальным на медленных машинах с низким FPS. Если апдейты уже сейчас должны идти с гарантированной частотой (я так и не понял из твоих слов, как движок выделяет время на апдейты), то действительно где-то ошибка.
      <br/>
      Если скрипту апдейты приходят реже 1 раза в секунду - последствия для геймплея очень плохие, например можно пролезть в запрещенную область, не подняв тревогу и т.д.
      <br/>
      <br/>
      3) все вылетающее на Ескейпе, что от нас зависит, исправлено 2 дня назад -
      <br/>
      в районе торговца и лагеря новичков ничего вылетать не должно</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2484" name="2484">
     <td class="bugnote-public">
      <span class="small">(0002484)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">04 марта 2005 11:02</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">На самом деле после r1_dlights 0 лаги убираются, НО проблема то как раз в том, что при лагах любой природы логика фактически стопорится, при том, что перемещаться по уровню можно.
      <br/>
      На высоких FPS все работает нормально.
      <br/>
      Сейчас нужно не лаги убирать, а добиться, чтобы при них тоже была гарантированная частота апдейтов у скриптов.
      <br/>
      Иначе будем потом разбирать бесконечные баграпорты "по мне не стреляли когда я ходил вокруг охранника".</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2486" name="2486">
     <td class="bugnote-public">
      <span class="small">(0002486)</span>
      <br/>
      Oles
      <br/>
      <span class="small">04 марта 2005 11:21</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">0) ты не понял. КАЖДЫЙ КАДР апдейты могут занимать 10 сек (!)
      <br/>
      2) правильно. скорее всего что-то сломалось, но нужно кроме логического поиска попробовать в-тюн - может что-то, где-то постоянно висит.
      <br/>
      3) это мы сегодня проверим :)
      <br/>
      <br/>
      а теперь вопросы:
      <br/>
      1. единственная фигня привязанная к ФПС - короутины(луа-среады) - вы уверены что эти фигни не в среаде?
      <br/>
      2. вы убрали биндинги с каждой баночки и коробочки?</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2488" name="2488">
     <td class="bugnote-public">
      <span class="small">(0002488)</span>
      <br/>
      Oles
      <br/>
      <span class="small">04 марта 2005 11:51</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">поскольку явно напрашивается логическая ошибка при дёрганьи вас - перенаправляю обратно на Диму
      <br/>
      но я всё-равно прогоню под в-тюном</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2489" name="2489">
     <td class="bugnote-public">
      <span class="small">(0002489)</span>
      <br/>
      Zmey
      <br/>
      <span class="small">04 марта 2005 11:52</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">0) 2) 3) ok, понятно
      <br/>
      <br/>
      по вопросам:
      <br/>
      1. лучше у Димы спросить
      <br/>
      "внешние" скрипты с функцией main() мы уже не используем
      <br/>
      <br/>
      2. да
      <br/>
      сейчас биндится только физика с секцией [logic] в customdata и прожектор</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2522" name="2522">
     <td class="bugnote-public">
      <span class="small">(0002522)</span>
      <br/>
      Dima
      <br/>
      <span class="small">10 марта 2005 16:09</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">У торговца рядом со мной с проставленными t_min = t_max = 1, апдейты приходят с частотой раз в секунду, причём дельта это в точности подтверждает - вывод : глюк в менеджере апдейтов</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
    <tr class="bugnote" id="2560" name="2560">
     <td class="bugnote-public">
      <span class="small">(0002560)</span>
      <br/>
      Oles
      <br/>
      <span class="small">14 марта 2005 11:43</span>
      <br/>
      <br/>
      <span class="small"></span>
    </td>
     <td class="bugnote-note-public">шедулер теперь более умный - раньше он при полной загрузке уходил в ступор</td>
    </tr>
    <tr>
     <td class="spacer" colspan="2"></td>
    </tr>
   </table>
  </div>
  <br/>
  <div id="history_closed" style="display: none;">
   <table cellspacing="0" class="width100">
    <tr>
     <td class="form-title" colspan="4">
      <a href="#">
       <img alt="+" border="0" src="images/plus.png"/>
      </a>
      История</td>
    </tr>
   </table>
  </div>
  <div id="history_open">
   <table cellspacing="0" class="width100">
    <tr>
     <td class="form-title" colspan="4">
      <a href="#">
       <img alt="-" border="0" src="images/minus.png"/>
      </a>
      История</td>
    </tr>
    <tr class="row-category-history">
     <td class="small-caption">Дата изменения</td>
     <td class="small-caption">Имя пользователя</td>
     <td class="small-caption">Поле</td>
     <td class="small-caption">Изменение</td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">24 февраля 2005 16:23</td>
     <td class="small-caption">Partizan</td>
     <td class="small-caption">Новое обращение</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">24 февраля 2005 16:23</td>
     <td class="small-caption">Partizan</td>
     <td class="small-caption">Следить: Prof</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">24 февраля 2005 16:23</td>
     <td class="small-caption">Partizan</td>
     <td class="small-caption">Следить: Koan</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">24 февраля 2005 16:23</td>
     <td class="small-caption">Partizan</td>
     <td class="small-caption">Следить: Sidorovich</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">24 февраля 2005 16:23</td>
     <td class="small-caption">Partizan</td>
     <td class="small-caption">Следить: Zmey</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">24 февраля 2005 16:23</td>
     <td class="small-caption">Partizan</td>
     <td class="small-caption">Следить: Chugai</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">03 марта 2005 12:42</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 2464</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">03 марта 2005 12:42</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Назначено</td>
     <td class="small-caption">Zmey =&gt; Dima</td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">03 марта 2005 13:15</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Комментарий добавлен: 2466</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">03 марта 2005 13:24</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 2467</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">03 марта 2005 13:25</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 2468</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">03 марта 2005 15:09</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Назначено</td>
     <td class="small-caption">Dima =&gt; Oles</td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">03 марта 2005 19:12</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Комментарий добавлен: 2476</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">04 марта 2005 10:33</td>
     <td class="small-caption">Sidorovich</td>
     <td class="small-caption">Комментарий добавлен: 2479</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">04 марта 2005 10:42</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 2481</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">04 марта 2005 11:02</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 2484</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">04 марта 2005 11:21</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Комментарий добавлен: 2486</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">04 марта 2005 11:51</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Комментарий добавлен: 2488</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">04 марта 2005 11:51</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Назначено</td>
     <td class="small-caption">Oles =&gt; Dima</td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">04 марта 2005 11:52</td>
     <td class="small-caption">Zmey</td>
     <td class="small-caption">Комментарий добавлен: 2489</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">10 марта 2005 16:09</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Комментарий добавлен: 2522</td>
     <td class="small-caption"></td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">10 марта 2005 16:10</td>
     <td class="small-caption">Dima</td>
     <td class="small-caption">Назначено</td>
     <td class="small-caption">Dima =&gt; Oles</td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">14 марта 2005 11:43</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Статус</td>
     <td class="small-caption">назначен =&gt; решен</td>
    </tr>
    <tr class="row-2">
     <td class="small-caption">14 марта 2005 11:43</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Решение</td>
     <td class="small-caption">открыт =&gt; исправлен</td>
    </tr>
    <tr class="row-1">
     <td class="small-caption">14 марта 2005 11:43</td>
     <td class="small-caption">Oles</td>
     <td class="small-caption">Комментарий добавлен: 2560</td>
     <td class="small-caption"></td>
    </tr>
   </table>
  </div>
  <br/>
  <tr align="center">
   <td align="center" colspan="6">
    <table>
    </table></td>
  </tr>
 </body>
